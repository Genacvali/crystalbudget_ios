# Version Bump Script

Автоматическое обновление версии приложения и PWA кэша.

## Использование

### Автоматически при сборке

```bash
npm run build
```

Скрипт автоматически:
1. Увеличивает patch версию в `package.json` (1.0.1 → 1.0.2)
2. Обновляет версию кэша в `public/sw.js` (v3 → v102)
3. Собирает проект

### Только обновить версию (без сборки)

```bash
npm run version:bump
```

### Сборка без обновления версии

```bash
npm run build:no-bump
```

## Как это работает

1. **package.json**: Инкрементирует patch версию (третья цифра)
   - 1.0.1 → 1.0.2
   - 1.0.9 → 1.0.10
   - 1.0.99 → 1.0.100

2. **public/sw.js**: Обновляет CACHE_NAME
   - Удаляет точки из версии и использует как суффикс
   - 1.0.2 → crystal-fin-buddy-v102
   - 1.2.15 → crystal-fin-buddy-v1215

3. **PWA Update**: При изменении CACHE_NAME, Service Worker автоматически:
   - Удаляет старый кэш
   - Создает новый
   - Заставляет браузеры загрузить свежие файлы

## Зачем это нужно

- **Автоматизация**: Не нужно вручную менять версии
- **Консистентность**: Версия всегда синхронизирована между package.json и sw.js
- **PWA Update**: Пользователи автоматически получают обновления
- **Без ошибок**: Исключает человеческий фактор при забытых обновлениях

## Примеры

```bash
# Разработка (версия не меняется)
npm run dev

# Продакшн сборка (версия обновляется автоматически)
npm run build

# Только инкремент версии
npm run version:bump

# Сборка без обновления версии (для тестов)
npm run build:no-bump
```

