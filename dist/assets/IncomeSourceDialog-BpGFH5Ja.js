import{i as y,r as l,j as e}from"./index-BczRz4ky.js";import{D as S,a as N,b as D,c as b,d as q,e as C}from"./dialog-BsWlHXv2.js";import{B as j}from"./crystal-icon-BR5-Rl_Z.js";import{L as d,I as g}from"./label-03Zcm6W0.js";import{S as F,a as I,b as T,d as E,e as r}from"./select-DrkzBdXl.js";import{o as k,Z as w,s as u}from"./types-Cqx1EfL_.js";const B=k({name:u().min(1,"Название обязательно").max(100),frequency:u().min(1,"Периодичность обязательна")});function A({open:m,onOpenChange:t,source:a,onSave:f}){const{toast:p}=y(),[x,i]=l.useState(""),[h,n]=l.useState(""),[c,o]=l.useState("#10b981");l.useEffect(()=>{a?(i(a.name),n(a.frequency||""),o(a.color)):(i(""),n(""),o("#10b981"))},[a,m]);const v=()=>{try{const s=B.parse({name:x.trim(),frequency:h.trim()});f({id:a==null?void 0:a.id,name:s.name,frequency:s.frequency,color:c}),t(!1)}catch(s){s instanceof w&&p({title:"Ошибка валидации",description:s.errors[0].message,variant:"destructive"})}};return e.jsx(S,{open:m,onOpenChange:t,children:e.jsxs(N,{className:"sm:max-w-[425px]",children:[e.jsxs(D,{children:[e.jsx(b,{children:a?"Редактировать источник":"Добавить источник дохода"}),e.jsx(q,{children:a?"Измените данные источника дохода":"Создайте новый источник дохода"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"name",children:"Название"}),e.jsx(g,{id:"name",placeholder:"Зарплата, Фриланс...",value:x,onChange:s=>i(s.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"frequency",children:"Периодичность"}),e.jsxs(F,{value:h,onValueChange:n,children:[e.jsx(I,{children:e.jsx(T,{placeholder:"Выберите периодичность"})}),e.jsxs(E,{className:"bg-background z-50",children:[e.jsx(r,{value:"Ежемесячно",children:"Ежемесячно"}),e.jsx(r,{value:"Еженедельно",children:"Еженедельно"}),e.jsx(r,{value:"Разово",children:"Разово"}),e.jsx(r,{value:"Ежегодно",children:"Ежегодно"}),e.jsx(r,{value:"Ежеквартально",children:"Ежеквартально"}),e.jsx(r,{value:"Непостоянно",children:"Непостоянно"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"color",children:"Цвет"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{id:"color",type:"color",value:c,onChange:s=>o(s.target.value),className:"w-20 h-10"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:c})]})]})]}),e.jsxs(C,{children:[e.jsx(j,{variant:"outline",onClick:()=>t(!1),children:"Отмена"}),e.jsx(j,{onClick:v,children:a?"Сохранить":"Добавить"})]})]})})}export{A as I};
