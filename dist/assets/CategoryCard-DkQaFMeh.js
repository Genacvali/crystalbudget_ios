import{c as C,j as e,g as n,l as z}from"./index-BczRz4ky.js";import{B as o}from"./crystal-icon-BR5-Rl_Z.js";import{P as j,a as b}from"./progress-DmPhu3Xe.js";import{u as P}from"./useCurrency-Ji0yYFK2.js";import{P as f}from"./dialog-BsWlHXv2.js";import{T as N}from"./select-DrkzBdXl.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=C("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),M=z("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",warning:"border-transparent bg-warning text-warning-foreground hover:bg-warning/80",success:"border-transparent bg-success text-success-foreground hover:bg-success/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function g({className:s,variant:r,...h}){return e.jsx("div",{className:n(M({variant:r}),s),...h})}function L({category:s,budget:r,incomeSources:h=[],onEdit:i,onDelete:x,onAddExpense:v,showSources:w=!0,compact:p=!1}){const{formatAmount:a}=P(),c=r.allocated>0?r.spent/r.allocated*100:0,t=r.spent>r.allocated,d=r.allocated-r.spent,l=t?{label:"Превышен",color:"destructive"}:c>90?{label:"Критично",color:"warning"}:c>70?{label:"Внимание",color:"warning"}:c>50?{label:"Норма",color:"default"}:{label:"Отлично",color:"success"};return!s.allocations||s.allocations.length===0||r.allocated===0?p?e.jsxs("div",{className:"group relative bg-card rounded-lg border p-3 hover:shadow-md transition-all hover:border-primary/50 flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl opacity-50",children:s.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-sm text-muted-foreground truncate",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Не настроен"})]}),i&&e.jsx(o,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:()=>i(s),children:e.jsx(f,{className:"h-3.5 w-3.5"})})]}):e.jsxs("div",{className:"group relative bg-card rounded-xl border-2 border-dashed p-4 hover:shadow-lg transition-all duration-300 hover:border-primary/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"text-4xl opacity-50",children:s.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-base text-muted-foreground",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Бюджет не настроен"})]})]}),i&&e.jsxs(o,{variant:"outline",size:"sm",className:"w-full",onClick:()=>i(s),children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Настроить бюджет"]})]}):p?e.jsx("div",{className:n("group relative bg-card rounded-lg border p-3 transition-all duration-200","hover:shadow-md hover:border-primary/50",t?"border-destructive/40 bg-destructive/5":"border-border"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl shrink-0",children:s.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-bold text-sm truncate",children:s.name}),e.jsx(g,{variant:l.color==="success"?"default":l.color,className:n("text-[10px] font-semibold px-2 py-0 shrink-0",l.color==="success"&&"bg-success text-success-foreground"),children:l.label})]}),e.jsx("div",{className:"relative mb-1",children:e.jsx(j,{value:Math.min(c,100),className:n("h-1.5 rounded-full",t&&"bg-destructive/20")})}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"font-semibold",children:a(r.spent)}),e.jsxs("span",{className:"text-muted-foreground",children:["из ",a(r.allocated)]})]})]}),e.jsxs("div",{className:"text-right shrink-0",children:[e.jsxs("div",{className:n("text-lg font-bold",t?"text-destructive":"text-foreground"),children:[c.toFixed(0),"%"]}),!t&&d>0&&e.jsx("div",{className:"text-[10px] text-success font-medium",children:a(d)}),t&&e.jsxs("div",{className:"text-[10px] text-destructive font-medium",children:["+",a(Math.abs(d))]})]}),e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex gap-1 shrink-0",children:[i&&e.jsx(o,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>i(s),children:e.jsx(b,{className:"h-3.5 w-3.5"})}),x&&e.jsx(o,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>x(s.id),children:e.jsx(N,{className:"h-3.5 w-3.5"})})]})]})}):e.jsxs("div",{className:n("group relative bg-card rounded-lg border p-3 transition-all duration-200","hover:shadow-md hover:border-primary/50",t?"border-destructive/40 bg-destructive/5":"border-border"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("div",{className:"text-3xl shrink-0",children:s.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-sm truncate mb-1",children:s.name}),e.jsx(g,{variant:l.color==="success"?"default":l.color,className:n("text-[10px] font-semibold px-2 py-0",l.color==="success"&&"bg-success text-success-foreground"),children:l.label})]})]}),e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex gap-1 shrink-0",children:[i&&e.jsx(o,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>i(s),children:e.jsx(b,{className:"h-3.5 w-3.5"})}),x&&e.jsx(o,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>x(s.id),children:e.jsx(N,{className:"h-3.5 w-3.5"})})]})]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Потрачено: "}),e.jsx("span",{className:"font-bold",children:a(r.spent)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"из "}),e.jsx("span",{className:"font-semibold",children:a(r.allocated)})]})]}),!t&&d>0?e.jsx("div",{className:"text-center py-1 px-2 bg-success/10 rounded border border-success/20",children:e.jsxs("span",{className:"text-xs font-semibold text-success",children:["Осталось ",a(d)]})}):null]}),e.jsxs("div",{className:"space-y-1 mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[10px] font-medium text-muted-foreground uppercase tracking-wide",children:"Использовано"}),e.jsxs("span",{className:n("text-xs font-bold",t?"text-destructive":"text-foreground"),children:[c.toFixed(0),"%"]})]}),e.jsx(j,{value:Math.min(c,100),className:n("h-2 rounded-full transition-all duration-500",t&&"bg-destructive/20")})]}),t&&e.jsxs("div",{className:"flex items-center gap-2 p-2 mb-2 bg-destructive/15 rounded border border-destructive/30",children:[e.jsx(B,{className:"h-4 w-4 text-destructive shrink-0"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("p",{className:"text-xs font-bold text-destructive",children:["Превышен на ",a(Math.abs(d))]})})]}),w&&s.allocations&&s.allocations.length>0&&e.jsxs("div",{className:"pt-3 border-t space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide mb-2",children:"Источники"}),s.allocations.map((m,y)=>{const u=h.find(k=>k.id===m.incomeSourceId);return u?e.jsxs("div",{className:"flex items-center gap-2.5 text-sm p-2 rounded-lg hover:bg-accent/50 transition-colors border border-transparent hover:border-accent",children:[e.jsx("div",{className:"w-3 h-3 rounded-full shrink-0 ring-2 ring-offset-1 ring-offset-card",style:{backgroundColor:u.color,ringColor:u.color}}),e.jsx("span",{className:"text-foreground flex-1 truncate font-medium",children:u.name}),e.jsx("span",{className:"font-semibold shrink-0 text-foreground",children:m.allocationType==="amount"?a(m.allocationValue):`${m.allocationValue}%`})]},y):null})]}),v&&e.jsx("div",{className:"pt-3 mt-3 border-t opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs(o,{variant:"outline",size:"sm",className:"w-full text-xs",onClick:()=>v(s.id),children:[e.jsx(f,{className:"h-3 w-3 mr-1"}),"Добавить расход"]})})]})}export{L as C};
